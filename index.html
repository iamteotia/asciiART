<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Image to ASCII Converte</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --md-bg: #ffffff;
      --md-surface: #ffe6f2;
      --md-surface-alt: #ffd1ec;
      --md-primary: #ff7fbf;
      --md-primary-soft: #ffc2e3;
      --md-primary-strong: #ff4fa3;
      --md-on-primary: #ffffff;
      --md-on-surface: #3b202f;
      --md-outline: #f2a9d3;
      --md-shadow-soft: 0 18px 45px rgba(255, 143, 190, 0.35);
      --radius-xl: 24px;
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", Roboto, sans-serif;
      color: var(--md-on-surface);
      background: radial-gradient(circle at top, #ffeaf5 0, #ffd6ee 20%, #ffc2e8 40%, #ffb3e0 60%, #ff9ad5 80%, #ff80c9 100%);
      overflow-x: hidden;
      position: relative;
    }

    /* Spiral particle background */
    .particles {
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
      opacity: 0.85;
    }

    .particle {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.55);
      box-shadow: 0 0 12px rgba(255, 255, 255, 0.85);
      animation: spiral 16s linear infinite;
      mix-blend-mode: screen;
    }

    .particle:nth-child(3n) {
      background: rgba(255, 195, 230, 0.9);
      width: 8px;
      height: 8px;
      animation-duration: 20s;
    }

    .particle:nth-child(4n) {
      background: rgba(255, 145, 205, 0.9);
      width: 12px;
      height: 12px;
      animation-duration: 24s;
    }

    @keyframes spiral {
      0% {
        transform: translate3d(50vw, 50vh, 0) rotate(0deg) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      100% {
        transform: translate3d(50vw, 50vh, 0) rotate(720deg) translateX(260px);
        opacity: 0;
      }
    }

    .app-shell {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 16px 40px;
    }

    .card {
      width: 100%;
      max-width: 1120px;
      background: color-mix(in srgb, var(--md-surface) 82%, #ffffff 18%);
      border-radius: 32px;
      box-shadow: var(--md-shadow-soft);
      border: 1px solid rgba(255, 161, 210, 0.65);
      padding: 24px;
      backdrop-filter: blur(18px);
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.2fr);
      gap: 24px;
    }

    @media (max-width: 900px) {
      .card {
        grid-template-columns: minmax(0, 1fr);
        padding: 20px;
      }
    }

    .header {
      margin-bottom: 18px;
    }

    .title {
      font-size: 1.9rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-weight: 800;
      color: var(--md-on-surface);
    }

    .subtitle {
      margin-top: 4px;
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.86rem;
      color: rgba(59, 32, 47, 0.7);
    }

    .subtitle span {
      color: var(--md-primary-strong);
    }

    .hint-chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-top: 14px;
      padding: 8px 14px;
      border-radius: var(--radius-pill);
      background: rgba(255, 255, 255, 0.84);
      border: 1px solid var(--md-outline);
      font-size: 0.8rem;
      color: rgba(59, 32, 47, 0.88);
    }

    .hint-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--md-primary-strong);
      box-shadow: 0 0 8px rgba(255, 79, 163, 0.6);
    }

    .panel {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-xl);
      padding: 18px 18px 16px;
      border: 1px solid rgba(255, 188, 224, 0.85);
      display: flex;
      flex-direction: column;
      gap: 14px;
      position: relative;
      overflow: hidden;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: -35%;
      background: radial-gradient(circle at top left, rgba(255, 250, 253, 0.95) 0, rgba(255, 180, 222, 0.4) 35%, transparent 60%);
      opacity: 0.9;
      pointer-events: none;
    }

    .panel-inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .panel-header-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
    }

    .panel-title {
      font-size: 0.94rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(59, 32, 47, 0.72);
      font-weight: 700;
    }

    .panel-label {
      font-size: 0.8rem;
      color: rgba(59, 32, 47, 0.55);
    }

    .upload-area {
      border-radius: var(--radius-lg);
      border: 1.5px dashed rgba(255, 151, 209, 0.95);
      background: rgba(255, 246, 252, 0.9);
      padding: 18px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.18s ease, background 0.18s ease, transform 0.12s ease;
    }

    .upload-area:hover {
      border-color: var(--md-primary-strong);
      background: rgba(255, 241, 252, 0.96);
      transform: translateY(-1px);
    }

    .upload-icon {
      width: 40px;
      height: 40px;
      border-radius: 16px;
      background: radial-gradient(circle at 30% 20%, #ffffff 0, #ffd5ec 30%, #ff9bd7 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 25px rgba(255, 143, 196, 0.55);
      color: var(--md-on-primary);
      font-size: 1.5rem;
    }

    .upload-title {
      font-size: 0.96rem;
      font-weight: 600;
    }

    .upload-sub {
      font-size: 0.78rem;
      color: rgba(59, 32, 47, 0.6);
    }

    .upload-input {
      display: none;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 6px;
    }

    .pill-label {
      font-size: 0.78rem;
      color: rgba(59, 32, 47, 0.66);
    }

    .toggle-group {
      display: inline-flex;
      padding: 3px;
      border-radius: var(--radius-pill);
      background: rgba(255, 193, 227, 0.5);
      gap: 4px;
    }

    .toggle-chip {
      border: none;
      background: transparent;
      padding: 6px 12px;
      font-size: 0.78rem;
      border-radius: var(--radius-pill);
      cursor: pointer;
      color: rgba(59, 32, 47, 0.7);
      transition: background 0.15s ease, color 0.15s ease, box-shadow 0.15s ease;
    }

    .toggle-chip.active {
      background: #ffffff;
      color: var(--md-primary-strong);
      box-shadow: 0 4px 10px rgba(255, 158, 212, 0.5);
    }

    .select-wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
      border-radius: 14px;
      background: rgba(255, 246, 251, 0.95);
      border: 1px solid rgba(255, 172, 216, 0.95);
      padding: 6px 14px;
      gap: 8px;
      cursor: pointer;
      min-width: 210px;
    }

    .select-label {
      font-size: 0.78rem;
      color: rgba(59, 32, 47, 0.7);
      white-space: nowrap;
    }

    select.ascii-font-select {
      border: none;
      background: transparent;
      font-size: 0.84rem;
      color: rgba(59, 32, 47, 0.9);
      outline: none;
      width: 100%;
      cursor: pointer;
      appearance: none;
      padding-right: 18px;
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .select-caret {
      position: absolute;
      right: 10px;
      pointer-events: none;
      font-size: 0.8rem;
      color: rgba(59, 32, 47, 0.65);
    }

    .action-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 6px;
    }

    .btn {
      border-radius: var(--radius-pill);
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 600;
      padding: 9px 18px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: background 0.12s ease, box-shadow 0.12s ease, transform 0.08s ease, opacity 0.1s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--md-primary-strong), var(--md-primary));
      color: var(--md-on-primary);
      box-shadow: 0 8px 22px rgba(255, 107, 176, 0.7);
    }

    .btn-primary:hover {
      box-shadow: 0 10px 28px rgba(255, 103, 174, 0.8);
      transform: translateY(-1px);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: 0 4px 12px rgba(255, 103, 174, 0.7);
    }

    .btn-outline {
      background: transparent;
      color: rgba(59, 32, 47, 0.8);
      border: 1px solid rgba(255, 162, 211, 0.95);
      backdrop-filter: blur(6px);
    }

    .btn-outline:hover {
      background: rgba(255, 246, 251, 0.96);
    }

    .btn-icon {
      font-size: 1rem;
    }

    .btn[disabled] {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .status-text {
      font-size: 0.78rem;
      color: rgba(59, 32, 47, 0.8);
    }

    .status-text strong {
      color: var(--md-primary-strong);
    }

    .status-text.muted {
      color: rgba(59, 32, 47, 0.55);
    }

    .output-panel {
      background: rgba(255, 255, 255, 0.98);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(255, 188, 224, 0.9);
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }

    .output-panel::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at bottom right, rgba(255, 250, 253, 0.96) 0, rgba(255, 178, 219, 0.4) 35%, transparent 60%);
      opacity: 0.8;
      pointer-events: none;
    }

    .output-inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
      height: 100%;
    }

    .output-header-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 6px;
    }

    .output-title {
      font-size: 0.94rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(59, 32, 47, 0.72);
      font-weight: 700;
    }

    .output-meta {
      font-size: 0.76rem;
      color: rgba(59, 32, 47, 0.6);
      text-align: right;
    }

    .output-meta span {
      color: var(--md-primary-strong);
      font-weight: 600;
    }

    .canvas-shell {
      flex: 1;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top, #fff7fd 0, #ffe2f3 35%, #ffd1ee 65%, #ffc2e8 100%);
      border: 1px solid rgba(255, 179, 220, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      min-height: 260px;
      position: relative;
      overflow: hidden;
    }

    .canvas-shell::after {
      content: "";
      position: absolute;
      inset: 18%;
      border-radius: 28px;
      border: 1px solid rgba(255, 220, 240, 0.9);
      opacity: 0.7;
      pointer-events: none;
    }

    #asciiCanvas {
      max-width: 100%;
      max-height: 520px;
      border-radius: 18px;
      background-color: #050308;
    }

    .empty-state {
      text-align: center;
      color: rgba(59, 32, 47, 0.7);
      font-size: 0.84rem;
      display: flex;
      flex-direction: column;
      gap: 4px;
      align-items: center;
      justify-content: center;
    }

    .empty-state span {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.76rem;
      background: rgba(255, 255, 255, 0.9);
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px dashed rgba(255, 171, 214, 0.9);
      color: rgba(59, 32, 47, 0.82);
    }

    .footer-note {
      margin-top: 8px;
      font-size: 0.74rem;
      color: rgba(59, 32, 47, 0.65);
      text-align: right;
    }

    .footer-note code {
      font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.7rem;
      color: var(--md-primary-strong);
    }
  </style>
</head>
<body>
  <div class="particles" aria-hidden="true">
    <!-- Light spiral of baby-pink particles -->
    <div class="particle" style="animation-delay: -0s;"></div>
    <div class="particle" style="animation-delay: -4s;"></div>
    <div class="particle" style="animation-delay: -8s;"></div>
    <div class="particle" style="animation-delay: -12s;"></div>
    <div class="particle" style="animation-delay: -16s;"></div>
    <div class="particle" style="animation-delay: -20s;"></div>
    <div class="particle" style="animation-delay: -24s;"></div>
    <div class="particle" style="animation-delay: -28s;"></div>
    <div class="particle" style="animation-delay: -32s;"></div>
    <div class="particle" style="animation-delay: -36s;"></div>
    <div class="particle" style="animation-delay: -40s;"></div>
    <div class="particle" style="animation-delay: -44s;"></div>
  </div>

  <main class="app-shell">
    <section class="card" aria-label="Image to ASCII converter">
      <div>
        <header class="header">
          <h1 class="title">Image to ASCII Converte</h1>
          <p class="subtitle">// by <span>vivek teotia</span></p>
          <div class="hint-chip">
            <div class="hint-dot"></div>
            <span>Upload any image · preserve exact dimensions · export as colorful ASCII JPEG</span>
          </div>
        </header>

        <div class="panel">
          <div class="panel-inner">
            <div class="panel-header-row">
              <p class="panel-title">Source image</p>
              <p class="panel-label">Step 1 · choose file & tune density</p>
            </div>

            <label class="upload-area">
              <input id="fileInput" class="upload-input" type="file" accept="image/*" />
              <div class="upload-icon">↑</div>
              <div class="upload-title">Drop image here or click to browse</div>
              <div class="upload-sub">PNG, JPG, JPEG · kept 1:1 in output</div>
            </label>

            <div class="pill-row">
              <div class="pill-label">Character density</div>
              <div class="toggle-group" id="densityGroup">
                <button type="button" class="toggle-chip active" data-step="9">Small</button>
                <button type="button" class="toggle-chip" data-step="7">Medium</button>
                <button type="button" class="toggle-chip" data-step="5">Large</button>
              </div>
            </div>

            <div class="pill-row">
              <div class="pill-label">ASCII character palette</div>
              <div class="select-wrapper">
                <span class="select-label">Font set</span>
                <select id="asciiFontSelect" class="ascii-font-select">
                  <option value="classic">Classic ramp ( @%#*+=-:. )</option>
                  <option value="dense">Dense detail (MW@#&8%B@$)</option>
                  <option value="smooth">Smooth gradient ( #$@&%*+=-:. )</option>
                  <option value="blocks">Blocky pixels (██▓▒░ )</option>
                  <option value="minimal">Minimal dots ( .,:;i1tfLCG0)</option>
                </select>
                <span class="select-caret">▾</span>
              </div>
            </div>

            <div class="action-row">
              <button id="convertBtn" class="btn btn-primary" type="button">
                <span class="btn-icon">◎</span>
                <span>Convert to color ASCII</span>
              </button>
              <button id="clearBtn" class="btn btn-outline" type="button">
                <span class="btn-icon">✕</span>
                <span>Clear</span>
              </button>
              <p id="statusText" class="status-text muted">No image loaded yet.</p>
            </div>
          </div>
        </div>
      </div>

      <div>
        <div class="output-panel">
          <div class="output-inner">
            <div class="output-header-row">
              <p class="output-title">Ascii canvas</p>
              <div class="output-meta">
                <div id="metaSize">Dimensions: — × —</div>
                <div><span>JPEG</span> export preserved 1:1</div>
              </div>
            </div>

            <div class="canvas-shell">
              <canvas id="asciiCanvas"></canvas>
              <div id="emptyState" class="empty-state">
                <p>Converted ASCII image will render here.</p>
                <span>hint: try portraits, logos, or neon shots</span>
              </div>
            </div>

            <div class="action-row">
              <button id="downloadBtn" class="btn btn-primary" type="button" disabled>
                <span class="btn-icon">⇣</span>
                <span>Download ASCII JPEG</span>
              </button>
              <p class="status-text" id="downloadHint">Rendered canvas is exported via JPEG at full resolution.</p>
            </div>

            <p class="footer-note">
              All ASCII is drawn onto a <code>&lt;canvas&gt;</code> to keep exact pixel dimensions intact.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    const fileInput = document.getElementById("fileInput");
    const convertBtn = document.getElementById("convertBtn");
    const clearBtn = document.getElementById("clearBtn");
    const densityGroup = document.getElementById("densityGroup");
    const asciiFontSelect = document.getElementById("asciiFontSelect");
    const asciiCanvas = document.getElementById("asciiCanvas");
    const emptyState = document.getElementById("emptyState");
    const statusText = document.getElementById("statusText");
    const metaSize = document.getElementById("metaSize");
    const downloadBtn = document.getElementById("downloadBtn");
    const downloadHint = document.getElementById("downloadHint");

    const ctx = asciiCanvas.getContext("2d");
    const offscreen = document.createElement("canvas");
    const offCtx = offscreen.getContext("2d");

    const asciiFonts = {
      classic: "@%#*+=-:. ",
      dense: "MW@#&8%B@$",
      smooth: "#$@&%*+=-:. ",
      blocks: "██▓▒░ ",
      minimal: ".,:;i1tfLCG0"
    };

    let img = null;
    let lastWidth = null;
    let lastHeight = null;
    let currentStep = 9;
    let isRendering = false;

    densityGroup.addEventListener("click", (e) => {
      const btn = e.target.closest(".toggle-chip");
      if (!btn) return;
      Array.from(densityGroup.querySelectorAll(".toggle-chip")).forEach((b) =>
        b.classList.remove("active")
      );
      btn.classList.add("active");
      currentStep = parseInt(btn.dataset.step, 10) || 9;
      if (img) {
        convertImageToAscii();
      }
    });

    document
      .querySelector(".upload-area")
      .addEventListener("click", () => fileInput.click());

    fileInput.addEventListener("change", (e) => {
      const file = e.target.files && e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (ev) => {
        const image = new Image();
        image.onload = () => {
          img = image;
          lastWidth = image.width;
          lastHeight = image.height;
          metaSize.textContent = "Dimensions: " + image.width + " × " + image.height;
          statusText.classList.remove("muted");
          statusText.textContent = "Image loaded. Click “Convert to color ASCII”.";
          emptyState.style.display = "flex";
          ctx.clearRect(0, 0, asciiCanvas.width, asciiCanvas.height);
          downloadBtn.disabled = true;
        };
        image.src = ev.target.result;
      };
      reader.readAsDataURL(file);
    });

    convertBtn.addEventListener("click", () => {
      if (!img || isRendering) return;
      convertImageToAscii();
    });

    clearBtn.addEventListener("click", () => {
      img = null;
      lastWidth = null;
      lastHeight = null;
      asciiCanvas.width = 0;
      asciiCanvas.height = 0;
      ctx.clearRect(0, 0, asciiCanvas.width, asciiCanvas.height);
      metaSize.textContent = "Dimensions: — × —";
      statusText.textContent = "Cleared. Upload a new image.";
      statusText.classList.add("muted");
      emptyState.style.display = "flex";
      downloadBtn.disabled = true;
      fileInput.value = "";
    });

    downloadBtn.addEventListener("click", () => {
      if (!asciiCanvas.width || !asciiCanvas.height) return;
      const dataURL = asciiCanvas.toDataURL("image/jpeg", 0.95);
      const link = document.createElement("a");
      link.href = dataURL;
      link.download = "ascii-image.jpeg";
      document.body.appendChild(link);
      link.click();
      link.remove();
      downloadHint.textContent = "Downloaded as JPEG at full canvas resolution.";
    });

    function convertImageToAscii() {
      if (!img) return;
      isRendering = true;
      statusText.textContent = "Rendering colorful ASCII…";
      statusText.classList.remove("muted");

      const w = img.width;
      const h = img.height;
      lastWidth = w;
      lastHeight = h;
      asciiCanvas.width = w;
      asciiCanvas.height = h;
      offscreen.width = w;
      offscreen.height = h;

      const asciiString = asciiFonts[asciiFontSelect.value] || asciiFonts.classic;
      const asciiChars = asciiString.split("");
      const numChars = asciiChars.length || 1;

      const baseCell = currentStep;
      const cellW = baseCell;
      const cellH = baseCell * 2;

      const fontSize = cellH * 0.9;
      ctx.clearRect(0, 0, w, h);
      ctx.fillStyle = "#050308";
      ctx.fillRect(0, 0, w, h);
      ctx.font = fontSize + "px 'JetBrains Mono', ui-monospace, monospace";
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";

      offCtx.drawImage(img, 0, 0, w, h);
      const imgData = offCtx.getImageData(0, 0, w, h).data;

      for (let y = 0; y < h; y += cellH) {
        for (let x = 0; x < w; x += cellW) {
          const px = Math.min(x, w - 1);
          const py = Math.min(y, h - 1);
          const idx = (py * w + px) * 4;

          const r = imgData[idx];
          const g = imgData[idx + 1];
          const b = imgData[idx + 2];
          const a = imgData[idx + 3];

          if (a < 20) {
            continue;
          }

          const brightness =
            0.299 * r + 0.587 * g + 0.114 * b;
          const charIndex = Math.floor(
            ((255 - brightness) / 255) * (numChars - 1)
          );
          const ch = asciiChars[charIndex] || " ";

          ctx.fillStyle = "rgba(" + r + "," + g + "," + b + ",1)";
          ctx.fillText(ch, x + cellW / 2, y + cellH / 2);
        }
      }

      emptyState.style.display = "none";
      downloadBtn.disabled = false;
      statusText.textContent = "Done. You can download your color ASCII image now.";
      isRendering = false;
    }
  </script>
</body>
</html>
